<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Perfil De Usuario - Pet Plate</title>
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="icon" href="/img/icon128.png" type="png">
</head>

<body>

    <!-- VENTANAS MODALES ---------------------------------------------------------->
    <!-- VENTANA MODAL INICIAR SESION ---------------------------------------------->
    <dialog class="modal-iniciar-sesion">
        <div class="iniciar-sesion">
            <form method="dialog" class="modal-iniciar-sesion__close-button">
                <button>X</button>
            </form>
            <img src="/img/logo-blanco.png" alt="logo" class="iniciar-sesion__logo">
            <h2 class="iniciar-sesion__titulo">Login</h2>
            <form id="iniciar-sesion-form">
                <input type="text" id="nombre-usuario-iniciar-sesion" class="input-form" placeholder="Usuario">
                <input type="password" id="contrasena-iniciar-sesion" class="input-form" placeholder="Contraseña">
                <label for="" id="error-label-iniciar-sesion">Esto no se deberia ver nunca</label>
                <input type="submit" value="Iniciar Sesion" class="input-button">
            </form>
            <p class="iniciar-sesion-alternativa">¿No tienes una cuenta? <span class="OPEN-modal-crear-cuenta CLOSE-modal-iniciar-sesion">Crear cuenta</span></p>
        </div>
    </dialog>

    <!-- VENTANA MODAL Crear Cuenta ------------------------------------------------>
    <dialog class="modal-crear-cuenta">
        <div class="crear-cuenta">
            <form method="dialog" class="modal-crear-cuenta__close-button">
                <button>X</button>
            </form>
            <img src="/img/logo-blanco.png" alt="logo" class="crear-cuenta__logo">
            <h2 class="crear-cuenta__titulo">Crear Cuenta</h2>
            <form class="modal-form" id="crear-cuenta-form">
                <input type="text" id="nombre-usuario-crear-cuenta" class="input-form-crear-cuenta" placeholder="Nombre de Usuario">
                <input type="text" id="correo-electronico-crear-cuenta" class="input-form-crear-cuenta" placeholder="Correo electronico">
                <input type="password" id="contrasena-crear-cuenta" class="input-form-crear-cuenta" placeholder="Contraseña">
                <input type="password" id="confirmar-contrasena-crear-cuenta" class="input-form-crear-cuenta" placeholder="Confirmar Contraseña">
                <label for="" id="error-label-crear-cuenta">Esto no se deberia ver nunca.</label> <!-- Aquí se insertarán los mensajes de error -->
                <input type="submit" value="Crear Cuenta" class="input-button">
            </form>
            <p class="crear-cuenta-alternativa">¿Ya tienes una cuenta? <span class="OPEN-modal-iniciar-sesion CLOSE-modal-crear-cuenta">Iniciar sesion</span></p>
        </div>
    </dialog>
    <!-- VENTANA MODAL buscar Receta BR----------------------------------------------->
    <dialog class="modal-buscar-receta">
        <div class="buscar-receta">
            <form method="dialog" class="modal-buscar-receta__close-button">
                <button>X</button>
            </form>

            <div class="categoria-tipo-box">
                <div class="animal-custom-select" id="BR-animal-custom-select">
                    <div class="animal-select-selected" id="BR-animal-select-selected">Animal</div>
                    <div class="animal-select-items" id="BR-animal-select-items">
                        <div data-value="perro">Perro</div>
                        <div data-value="gato">Gato</div>
                        <div data-value="conejo">Conejo</div>
                        <div data-value="tortuga">Tortuga</div>
                        <div data-value="ave">Ave</div>
                    </div>
                </div>

                <div class="tipo-custom-select" id="BR-tipo-custom-select">
                    <div class="tipo-select-selected" id="BR-tipo-select-selected">Tipo</div>
                    <div class="tipo-select-items" id="BR-tipo-select-items">
                    </div>
                </div>

            </div>

            <div class="buscar-por-ingrediente">
                <input type="text" class="ingrediente-input" placeholder="Escribe un ingrediente..." />
                <div class="ingrediente-select-items">
                </div>
                <div class="resultados" id="ingredientes-buscar-receta"></div> <!-- Aquí se añadirán los divs creados -->
                <label id="error-label-buscar-receta">Esto no se deberia llegar a ver nunca en el frontend</label>
                <div class="input-button--aling">
                    <input type="submit" value="Buscar" class="input-button input-button--buscar-receta" id="boton-buscar-receta">
                </div>
                

            </div>

        </div>
    </dialog>

    <!-- header -------------------------------------------------------------------->
    <header class="cabecera">
        <nav class="nav">
            <ul class="nav__list">
                <li class="nav__list__item  item--logo">
                    <a href="/" class="sacar_decoracion_link">
                        <img src="/img/logoCuchara.png" alt="" class="logo-header">
                    </a>
                    <a href="/backOffice" class="sacar_decoracion_link back-office-link" id="back-office-button">
                        <img src="/img/adminLogo.jpg" alt="" class="logo-header">
                    </a>
                    
                </li>
                

                <li class="nav__list__item item--buscador OPEN-modal-buscar-receta">
                    <img src="/img/lupa.png" alt="buscar" class="item--buscador--img">
                    <span>Buscar</span>
                </li>
                
                <li class="nav__list__item nav__list__item--flex">

                    <!-- boton de crear receta en caso de estar logeado-->
                    <a class="item--crear-receta" href="/recipe/create" id="boton-crear-receta-header">
                        <img src="/img/crear-receta.png" alt="boton-crear-receta">
                    </a>
                    
                    <!-- boton de iniciar sesion en caso de no estar logeado-->
                    <div class="item--iniciar-sesion OPEN-modal-iniciar-sesion" id="boton-iniciar-sesion-header">Iniciar Sesion</div>

                    <!-- boton de iniciar sesion cerrar sesion en caso de estar logeado-->
                    <div class="item--iniciar-sesion" id="boton-cerrar-sesion-header">Cerrar Sesion</div>

                    <!-- imagen de perfil en caso de estar logeado-->
                    <img src="/img/profile-img.png" alt="" class="foto-perfil-header" id="boton-ir-a-perfil-header">

                </li>
            </ul>
        </nav>
    </header>

    <!-- layout--------------------------------------------------------------------->
    <div class="layout">
        <main class="PFL-main">
            <div class="PRF-encabezado">
                <!-- Input type file oculto -->
                <input type="file" id="fileInput" accept="image/*">

                <div class="image-container" id="clickableImage">
                    <!-- Imagen de fondo que siempre se ve -->
                    <img th:src="${userImgName != null ? userImgName : '/img/profile-default-inverted.jpg'}" alt="Imagen de perfil" id="img-perfil-usuario">
                    
                    <!-- Imagen que aparece al hacer hover -->
                    <img src="/img/cambiar-imagen.png" alt="Imagen al pasar el mouse" class="image-top" id="boton-cambiar-img-perfil">
                </div>
                <!-- 
                <img src="/img/profile-img.png" alt="foto-perfil" class="foto-perfil-usuario">-->
                <label id="error-label-cambiar-imagen">Esto no se deberia ver nunca</label>
                <h1 class="PRF-nombre-usuario" th:text="${userName}">Nombre de Usuario</h1>
            </div>
            <h2 class="PFL-titulo">Recetas</h2>

            <div class="lista-recetas" th:if="${#lists.size(recetas) > 0}">
                <!-- Itera sobre la lista de recetas -->
                <div class="carta-receta" th:each="receta : ${recetas}" id="perfil-contenedor-receta">
                    <div class="receta-detalles">
                        <!-- Título de la receta -->
                        <a th:href="@{/recipe/{id}(id=${receta.recipeId})}" th:text="${receta.title}" class="receta-detalles__titulo">Título receta</a>
                        <!-- Ingredientes de la receta -->
                        <p class="receta-detalles__ingredientes" th:text="${#strings.arrayJoin(receta.ingredientes, ' - ')}">
                            Ingredientes
                        </p>
                    </div>
                    <div id="perfil-contenedor-receta-ranking-modificar">
                        <div class="receta-rating">
                            <!-- Puntuación de la receta -->
                            <span class="receta-rating__valor" th:text="${receta.Score}">999</span>
                            <img src="/img/estrella.png" class="receta-rating__estrella">
                        </div>
                        <a th:href="@{/recipe/modify/{id}(id=${receta.recipeId})}" class="contenedor-imagen-perfil-contendor-receta">
                            <img src="/img/editar.png" alt="icono-modificar-receta">
                        </a>
                    </div>
                </div>
            </div>
            
            <!-- Mostrar mensaje si no hay recetas -->
            <h2 th:if="${#lists.size(recetas) == 0}" class="PFL-titulo">No se ha publicado ninguna receta.</h2>
            
            

        </main>
    </div>

    <!--Scripts   ------------------------------------------------------------------>
    <script src="/js/script.js"></script>
    <script src="/js/sesion.js"></script>
    <script src="/js/perfil.js"></script>
</body>
</html>
